<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Comments in Code | Rahul Kadyan</title><meta name="description" content="So one more pull request got rejected for having a comment; "Good code is self-documenting.", said the reviewer."><link rel="icon" type="image/x-icon" href="/_assets/favicon-Bdf8E-7X.png"><style>*,::after,::before{box-sizing:border-box;margin:0;padding:0}:root{--font-sans:'Noto Serif',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;--font-serif:'Noto Serif',Georgia,Cambria,'Times New Roman',Times,serif;--font-mono:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,monospace;--text-body:#333;--text-muted:#666;--background:#ffffff;--accent:#005fcc;--border:#e0e0e0;--radius:0.5rem;--line-height:1.6}@media (prefers-color-scheme:dark){:root{--text-body:#dadada;--text-muted:#a0a0a0;--background:#111111;--accent:#7aa9ff;--border:#333333}}html{font-size:16px;color-scheme:light dark}body{font-family:var(--font-sans);color:var(--text-body);background-color:var(--background);line-height:var(--line-height);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}#app{width:min(90vw,700px);margin-inline:auto;padding-block:2rem}.moss-site-header{margin-block-end:2rem}nav{margin-block-start:0.5rem;display:flex;gap:1rem;flex-wrap:wrap}nav a{color:var(--text-muted);text-decoration:none;font-weight:500}nav a:focus,nav a:hover{color:var(--accent)}h1,h2,h3,h4,h5,h6{line-height:1.25;font-weight:700;margin-block:1.5rem 1rem;font-family:var(--font-serif)}h1{font-size:2.25rem}h2{font-size:1.75rem}h3{font-size:1.5rem}h4{font-size:1.25rem}h5{font-size:1rem;font-weight:800}h6{font-size:.875rem;font-weight:900}blockquote,ol,p,pre,table,ul{margin-block:1rem}article{margin-block-end:3rem}a{color:var(--accent);text-decoration-color:color-mix(in srgb,var(--accent) 50%,transparent);text-underline-offset:2px}a:focus,a:hover{text-decoration-thickness:2px}blockquote{border-inline-start:0.25rem solid var(--accent);padding-inline-start:1rem;color:var(--text-muted);font-style:italic}code,pre{font-family:var(--font-mono);border-radius:var(--radius)}pre:not(:has(> code)){overflow-x:auto;padding:1rem}pre:has(> code){border:1px solid var(--border)}pre>code{overflow-x:auto;padding:1rem;width:100%;display:block}pre[data-file],pre[data-language]{position:relative}pre[data-language]::after{content:attr(data-language);position:absolute;top:0;right:0;padding:.125rem .25rem;color:var(--text-muted);border-radius:var(--radius);font-size:.6rem;text-transform:uppercase}pre[data-file]::before{content:'FILE: ' attr(data-file);position:absolute;top:0;left:0;padding:.125rem .25rem .125rem 1rem;color:var(--text-muted);border-radius:var(--radius);font-size:.6rem}code{padding:.125rem .25rem}code:not([class]):not(pre code){background-color:color-mix(in srgb,var(--accent) 10%,var(--background));color:var(--accent);padding:.125rem .25rem;border-radius:var(--radius)}article img,figure img{max-width:100%;height:auto;max-height:80dvh;border-radius:var(--radius)}img[large]{display:block;margin:2rem auto}figcaption{font-size:.875rem;text-align:center;color:var(--text-muted);margin-top:.5rem}table{width:100%;border-collapse:collapse}table td,table th{padding:.75rem 1rem;text-align:left;border-bottom:1px solid var(--border)}table thead th{border-bottom:2px solid var(--border)}footer{font-size:.875rem;color:var(--text-muted);border-top:1px solid var(--border);padding-block:2rem;margin-block-start:4rem}ol,ul{padding-inline-start:1.5rem}ul{list-style-type:disc}ol{list-style-type:decimal}ol ol,ol ul,ul ol,ul ul{margin-block-start:0.5rem;margin-block-end:0.5rem;list-style-type:circle}li{margin-block:0.5rem}.moss-skip-link,.sr-only{display:inline-block;width:1px;height:1px;padding:0;margin:-1px 0 0 -1px;overflow:hidden;clip:rect(0,0,0,0);clip-path:circle(0);white-space:nowrap;border:0}.moss-skip-link:active,.moss-skip-link:focus{overflow:visible;z-index:1000}.moss-anchored-heading{position:relative}.moss-anchor::before{content:'#';display:inline-block;margin-left:-1.25ch;margin-right:.25ch;fill:currentColor;opacity:0;transition:opacity 250ms ease-in-out}.moss-anchor-container{position:absolute;top:0;left:0}.moss-anchor-container:focus .moss-anchor::before,.moss-anchor-container:focus-within .moss-anchor::before,.moss-anchor-container:hover .moss-anchor::before,.moss-anchored-heading:focus .moss-anchor::before,.moss-anchored-heading:focus-within .moss-anchor::before,.moss-anchored-heading:hover .moss-anchor::before{opacity:1}</style><link rel="modulepreload" crossorigin href="/_assets/2019-05-26-comments-in-code-CSQewKF8.js"> <link rel="preload" href="/_assets/doc-comment-C4Pd9mxy.png" as="image" type="image/png"><link rel="alternate" type="text/markdown" href="https://znck.dev/articles/2019-05-26-comments-in-code.md"><link rel="canonical" href="https://znck.dev/articles/2019-05-26-comments-in-code"><meta property="og:image" content="https://znck.dev/_assets/doc-comment-C4Pd9mxy.png"><link rel="alternate" type="application/atom+xml" href="https://znck.dev/atom.xml"><link rel="alternate" type="application/rss+xml" href="https://znck.dev/rss.xml"><script type="module" crossorigin src="/_assets/index-CslQqMog.js"></script></head><body><div id="app"><!--[--><a class="moss-skip-link" href="#moss-content-region">Skip to content</a><header class="moss-site-header"><nav aria-label="Primary navigation"><a href="/">Home</a></nav></header><main id="moss-content-region" class="moss-content moss-layout-default"><article><!--[--><!--[--><h1 id="comments-in-code" class="moss-anchored-heading">Comments in Code<a tabindex="-1" class="moss-anchor-container" href="#comments-in-code"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Comments in Code</span></a></h1><p>So one more pull request got rejected for having a comment; &quot;Good code is self-documenting.&quot;, said the reviewer.</p><h2 id="good-code" class="moss-anchored-heading">Good code<a tabindex="-1" class="moss-anchor-container" href="#good-code"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Good code</span></a></h2><p>What is good code? My code runs fast, is it &quot;good code&quot;? My code requires low memory, is it &quot;good code&quot;? It is difficult to answer, &quot;what is good code?&quot; without knowing, &quot;why do we write code?&quot;.</p><p>In my opinion, we write code to tell other people what we want a computer to do. We write for people. The preface of the book <a href="https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book-Z-H-7.html" target="_blank" rel="noopener noreferrer">Structure and Interpretation of Computer Programs</a>, by Abelson, Sussman, and Sussman, captures the intent appropriately:</p><blockquote><p>Programs must be written for people to read, and only incidentally for machines to execute.</p></blockquote><p>Code is for people to read.</p><p>In an ideal world, with a perfect language, a code is for people to read. However, ours is not an ideal world, and any programming language is far from perfect. Once in a while, we have to cut corners to improve performance or to fix a tricky bug or to handle an edge-case. After all, we want to ship better products, and it diverts us from the primary objective of writing code: &quot;for people to read.&quot;</p><p>Every once in a while, we have to complicate parts of some code to make the product better. Machines are happy with this complicated code, so are our customers. However, humans (a.k.a. developers) are troubled. Every time, a developer visits this piece of complicated code, she wonders why did we do this?</p><p>Indeed the &quot;why&quot; is missing from any code. As I said before, we write code to tell other people what we want a computer to do. Yes! &quot;what&quot;; The code says &quot;what&quot; (or more precisely &quot;how&quot;). We need something to share the &quot;why&quot; behind the code, and comments fill that gap. The comments are part of any language syntax to convey, why the code is written this way?</p><h2 id="comments-tell-why" class="moss-anchored-heading">Comments tell Why<a tabindex="-1" class="moss-anchor-container" href="#comments-tell-why"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Comments tell Why</span></a></h2><p>Let&#39;s take an example of lazy <code>v-model</code> directive in Vue. The <code>v-model</code> directive binds a variable in JavaScript to an <code>&lt;input&gt;</code> field such that the variables value updates as user types in the input field. However, for languages which use <span title="Input Method Handler"><a href="https://en.wikipedia.org/wiki/Input_method" target="_blank" rel="noopener noreferrer">IME</a></span>, this approach does not work, so Vue provides a lazy modifier. Following is the code snippet which handles lazy modifier:</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">!</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">binding</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">modifiers</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.lazy) {</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;compositionstart&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionStart)</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;compositionend&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionEnd)</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;change&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionEnd)</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><p>It is clear from the code that the <code>onCompositionEnd</code> method listens to <code>compositionend</code> and <code>change</code> events. <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/compositionend_event" target="_blank" rel="noopener noreferrer">The spec</a> says that the <code>compositionend</code> event is fired when composition completes or cancels, then why does this piece of code attach extra event listener. It looks like Evan forgot to remove it, let&#39;s send a PR. It makes sense absolute sense to remove that line of code, however only because the why is missing! Let&#39;s add the &quot;why&quot; to above code:</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">!</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">binding</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">modifiers</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.lazy) {</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;compositionstart&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionStart)</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;compositionend&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionEnd)</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // Safari &lt; 10.2 &amp; UIWebView doesn&#39;t fire compositionend when</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // switching focus before confirming composition choice</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // this also fixes the issue where some browsers e.g. iOS Chrome</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // fires &quot;change&quot; instead of &quot;input&quot; on autocomplete.</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  el</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.addEventListener</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;change&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> onCompositionEnd)</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><p>What do you think now? Does it make any sense to remove the <code>change</code> event listener? Comments provide essential information about the code without adding any runtime overhead. Does that mean all comments are good? What do all comments mean anyways?</p><h2 id="types-of-comments" class="moss-anchored-heading">Types of Comments<a tabindex="-1" class="moss-anchor-container" href="#types-of-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Types of Comments</span></a></h2><p>Comments are free-form text. Depending on the type of text, we get different kinds of comments. Following types are as I see them:</p><ul><li>Clarification Comments</li><li>Documentation Comments</li><li>License Comments</li><li>Reference Comments</li><li>Tagged Comments</li><li>Control Comments</li><li>Dead-code Comments</li></ul><h3 id="clarification-comments" class="moss-anchored-heading">Clarification Comments<a tabindex="-1" class="moss-anchor-container" href="#clarification-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Clarification Comments</span></a></h3><p>As evident from the name, these comments clarify some obscure piece of code or logic. Let&#39;s take another example from vue source:</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">let</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> getNow </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Date</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.now</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (inBrowser </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&amp;&amp;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> !</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">isIE) {</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> window</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.performance</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (performance </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&amp;&amp;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> typeof</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.now </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">===</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;function&#39;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNow</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">() </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&gt;</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> document</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.createEvent</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;Event&#39;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">).timeStamp) {</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getNow</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.now</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/core/observer/scheduler.js" target="_blank" rel="noopener noreferrer">core/observer/scheduler.js</a> with comments removed </figcaption></figure><p>This code snippet patches an inconsistency in browsers event timestamp API. From looking at the code, we get that we want to use <code>Date.now</code>; However, for some condition, we switch to <code>performance.now</code>. It is unclear why would we need this, but the comments can clarify:</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">let</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> getNow </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Date</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.now</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// Determine what event timestamp the browser is using. Annoyingly, the</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// timestamp can either be hi-res (relative to page load) or low-res</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// (relative to UNIX epoch), so in order to compare time we have to use the</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// same timestamp type when saving the flush timestamp.</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// All IE versions use low-res event timestamps, and have problematic clock</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// implementations (#9632)</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (inBrowser </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&amp;&amp;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> !</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">isIE) {</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> window</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.performance</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (performance </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&amp;&amp;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> typeof</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.now </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">===</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;function&#39;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getNow</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">() </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&gt;</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> document</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.createEvent</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;Event&#39;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">).timeStamp) {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    // if the event timestamp, although evaluated AFTER the Date.now(), is</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    // smaller than it, it means the event is using a hi-res timestamp,</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    // and we need to use the hi-res version for event listener timestamps as</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    // well.</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getNow</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> performance</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.now</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">()</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/core/observer/scheduler.js" target="_blank" rel="noopener noreferrer">core/observer/scheduler.js</a> from vue source </figcaption></figure><p>The comments which tell &quot;why&quot; and explain the reason behind the code, I call them clarification comment. I recommend using clarification comments as long as you maintain them with the code associated. Yes, they add a little maintenance overhead but also keep the code understandable for humans.</p><h3 id="documentation-comments" class="moss-anchored-heading">Documentation Comments<a tabindex="-1" class="moss-anchor-container" href="#documentation-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Documentation Comments</span></a></h3><p>Even the purist self-documenting developers have nothing against documentation comments (or doc comments). Doc comments provide additional information for APIs and make them approachable by humans.</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">/**</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * Computes (a^b)</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> *</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">@param</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {number}</span><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> a - The base number</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">@param</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> {number}</span><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> b - The exponent.</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> */</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">function</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> pow</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(a</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> b) {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // ...</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><p>Editors use the structured information from doc comments to provide rich developer experience.</p><p><img src="/assets/doc-comment-C4Pd9mxy.png" alt="Screenshot: Editor intellisense using doc comments"></p><p>Doc comments and editor intellisense give superpowers to us, we know what would a piece of code do without looking at the source.</p><p>Also, Doc comments are used to automate API documentation generation.</p><h3 id="license-comments" class="moss-anchored-heading">License Comments<a tabindex="-1" class="moss-anchor-container" href="#license-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled License Comments</span></a></h3><p>Today, we do dependency driven development. Every project depends on thousands of other projects. Licenses play an essential role in DDD. Some licenses allow modifying the original code. For example, the virtual DOM implementation in vue is a fork of Snabbdom.</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">/**</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * Virtual DOM patching algorithm based on Snabbdom by</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * Simon Friis Vindum (@paldepind)</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * Licensed under the MIT License</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * https://github.com/paldepind/snabbdom/blob/master/LICENSE</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> *</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * modified by Evan You (@yyx990803)</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> *</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * Not type-checking this because this file is perf-critical and the cost</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> * of making flow understand it is not worth it.</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;"> */</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/core/vdom/patch .js" target="_blank" rel="noopener noreferrer">core/vdom/patch.js:L1-10</a> from vue source </figcaption></figure><p>License comments, in derived work, are an excellent way of honoring another person&#39;s work.</p><h3 id="reference-comments" class="moss-anchored-heading">Reference Comments<a tabindex="-1" class="moss-anchor-container" href="#reference-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Reference Comments</span></a></h3><p>A significant part of a developer&#39;s work is copy-pasting from StackOverflow; we all know that. Sometimes we copy code without even thinking about it. There&#39;s no shame in that, but provide the reference to the next person working on that code. We can use a reference comment for that:</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">tag</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.indexOf</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;-&#39;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">&gt;</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> -</span><span style="color:light-dark(#1976D2, #F8F8F8);--shiki-light:#1976D2;--shiki-dark:#F8F8F8;">1</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">) {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // http://stackoverflow.com/a/28210364/1070244</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  return</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (unknownElementCache[tag] </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">    el</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">constructor</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> ===</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> window</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.HTMLUnknownElement </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">||</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> el</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">constructor</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> ===</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> window</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.HTMLElement)</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/platforms/web/util/element.js" target="_blank" rel="noopener noreferrer">platforms/web/util/element.js:L66-72</a> from vue source </figcaption></figure><p>The reference comments are often permalinks to StackOverflow (or similar platform) answers, although they can be page numbers from any book or snippets from other projects too. Add a reference comment whenever you copy-paste something in your code.</p><h3 id="tagged-comments" class="moss-anchored-heading">Tagged Comments<a tabindex="-1" class="moss-anchor-container" href="#tagged-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Tagged Comments</span></a></h3><p>Tagged comments are inline reminders, something like a note to future self. They start with a fixed prefix, called tag here. Most common tag is <code>TODO</code>, but you can use any tag.</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// TODO: Write some code here</span></span></code></pre><p>Let&#39;s take another example from vue source:</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">prevChildren</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.forEach</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">((c) </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">  c</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">data</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.transition </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> transitionData</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">  // TODO: record before patch positions</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">  if</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> (map[</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">c</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.key]) {</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">    kept</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.push</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(c)</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  } </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">else</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">    removed</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.push</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(c)</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">})</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/platforms/weex/runtime/components/transition-group.js" target="_blank" rel="noopener noreferrer">platforms/weex/runtime/components/transition-group.js:L60-70</a> from vue source </figcaption></figure><p>Tagged comments help us to continue concentrating on the current task while leaving hints for what to do next.</p><h3 id="control-comments" class="moss-anchored-heading">Control Comments<a tabindex="-1" class="moss-anchor-container" href="#control-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Control Comments</span></a></h3><p>Today, we have a plethora of tools, making it easier to write code. Linters make us adhere to a code style.<br> Transpilers allow us to use the latest syntax.<br> Bundlers help us to ship code better.</p><p>These tools work well in most cases, but there are some scenarios where they need some help from the developer. Comments again provide an excellent way to provide information and context to these tools.</p><p>For example, webpack allows async imports to be preloaded or prefetched, and we can configure this inline:</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">const</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HomePage</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  import</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    /* webpackPreload: true */</span></span>
<span class="line"><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">    &#39;./pages/home.vue&#39;</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  )</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">const</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AboutPage</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  import</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">    /* webpackPrefetch: true */</span></span>
<span class="line"><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">    &#39;./pages/about.vue&#39;</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  )</span></span></code></pre><p>The comment <code>/* webpackPreload: true */</code> configures webpack inline to preload the home page. Similar, control comments are offered by eslint too:</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// eslint-disable-next-line</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eval</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">...</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">)</span></span></code></pre><p>The comment <code>// eslint-disable-next-line</code> tells eslint to shut up for the next line. Control comments give superpowers to toolings and developers to finetune their applications.</p><h3 id="dead-code-comments" class="moss-anchored-heading">Dead-code Comments<a tabindex="-1" class="moss-anchor-container" href="#dead-code-comments"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Dead-code Comments</span></a></h3><p>The commented code or dead-code comments are the worst kinds of comments. There is absolutely no reason for their existence, delete them!</p><p>Let&#39;s see an example from vue source:</p><figure data-type="code"><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// children.forEach(callPendingCbs)</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// Promise.all(children.map(c =&gt; {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   const oldPos = c.data.pos</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   const newPos = c.data.newPos</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   const dx = oldPos.left - newPos.left</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   const dy = oldPos.top - newPos.top</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   if (dx || dy) {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//     c.data.moved = true</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//     return this.animate(c.elm, {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//       styles: {</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//         transform: `translate(${dx}px,${dy}px)`</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//       }</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//     })</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">//   }</span></span>
<span class="line"><span style="color:light-dark(#C2C3C5, #6B737C);--shiki-light:#C2C3C5;--shiki-dark:#6B737C;">// }))</span></span></code></pre><figcaption><a href="https://github.com/vuejs/vue/blob/22790b250cd5239a8379b4ec8cc3a9b570dac4bc/src/platforms/weex/runtime/components/transition-group.js" target="_blank" rel="noopener noreferrer">platforms/weex/runtime/components/transition-group.js:L97-128</a> from vue source </figcaption></figure><p>I hate dead-code comments; they are easy to add but difficult to remove. When you come back to dead-code comments, you always wonder, why did you comment this code in the first place?</p><p>Please remove dead-code comments from vue, send a pull request.</p><h2 id="comment-comment-comment" class="moss-anchored-heading">Comment! Comment! Comment<a tabindex="-1" class="moss-anchor-container" href="#comment-comment-comment"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Comment! Comment! Comment</span></a></h2><p>Comments are compelling tools in programming languages. Use them to complement your code, to answer questions which are unanswered by the code. Do not use comments to create more questions.</p><!--]--><!--]--></article></main><!--]--></div></body></html>