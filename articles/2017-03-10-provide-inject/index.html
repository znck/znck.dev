<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Provide/Inject in Vue 2.2 | Rahul Kadyan</title><meta name="description" content="The Initial D release of Vue have some amazing new features, including improved server side rendering, v-model customization, better error handling, provide & inject pair and many other small improvements."><link rel="icon" type="image/x-icon" href="/_assets/favicon-Bdf8E-7X.png"><style>*,::after,::before{box-sizing:border-box;margin:0;padding:0}:root{--font-sans:'Noto Serif',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;--font-serif:'Noto Serif',Georgia,Cambria,'Times New Roman',Times,serif;--font-mono:'SFMono-Regular',Consolas,'Liberation Mono',Menlo,monospace;--text-body:#333;--text-muted:#666;--background:#ffffff;--accent:#005fcc;--border:#e0e0e0;--radius:0.5rem;--line-height:1.6}@media (prefers-color-scheme:dark){:root{--text-body:#dadada;--text-muted:#a0a0a0;--background:#111111;--accent:#7aa9ff;--border:#333333}}html{font-size:16px;color-scheme:light dark}body{font-family:var(--font-sans);color:var(--text-body);background-color:var(--background);line-height:var(--line-height);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}#app{width:min(90vw,700px);margin-inline:auto;padding-block:2rem}.moss-site-header{margin-block-end:2rem}nav{margin-block-start:0.5rem;display:flex;gap:1rem;flex-wrap:wrap}nav a{color:var(--text-muted);text-decoration:none;font-weight:500}nav a:focus,nav a:hover{color:var(--accent)}h1,h2,h3,h4,h5,h6{line-height:1.25;font-weight:700;margin-block:1.5rem 1rem;font-family:var(--font-serif)}h1{font-size:2.25rem}h2{font-size:1.75rem}h3{font-size:1.5rem}h4{font-size:1.25rem}h5{font-size:1rem;font-weight:800}h6{font-size:.875rem;font-weight:900}blockquote,ol,p,pre,table,ul{margin-block:1rem}article{margin-block-end:3rem}a{color:var(--accent);text-decoration-color:color-mix(in srgb,var(--accent) 50%,transparent);text-underline-offset:2px}a:focus,a:hover{text-decoration-thickness:2px}blockquote{border-inline-start:0.25rem solid var(--accent);padding-inline-start:1rem;color:var(--text-muted);font-style:italic}code,pre{font-family:var(--font-mono);border-radius:var(--radius)}pre:not(:has(> code)){overflow-x:auto;padding:1rem}pre:has(> code){border:1px solid var(--border)}pre>code{overflow-x:auto;padding:1rem;width:100%;display:block}pre[data-file],pre[data-language]{position:relative}pre[data-language]::after{content:attr(data-language);position:absolute;top:0;right:0;padding:.125rem .25rem;color:var(--text-muted);border-radius:var(--radius);font-size:.6rem;text-transform:uppercase}pre[data-file]::before{content:'FILE: ' attr(data-file);position:absolute;top:0;left:0;padding:.125rem .25rem .125rem 1rem;color:var(--text-muted);border-radius:var(--radius);font-size:.6rem}code{padding:.125rem .25rem}code:not([class]):not(pre code){background-color:color-mix(in srgb,var(--accent) 10%,var(--background));color:var(--accent);padding:.125rem .25rem;border-radius:var(--radius)}article img,figure img{max-width:100%;height:auto;max-height:80dvh;border-radius:var(--radius)}img[large]{display:block;margin:2rem auto}figcaption{font-size:.875rem;text-align:center;color:var(--text-muted);margin-top:.5rem}table{width:100%;border-collapse:collapse}table td,table th{padding:.75rem 1rem;text-align:left;border-bottom:1px solid var(--border)}table thead th{border-bottom:2px solid var(--border)}footer{font-size:.875rem;color:var(--text-muted);border-top:1px solid var(--border);padding-block:2rem;margin-block-start:4rem}ol,ul{padding-inline-start:1.5rem}ul{list-style-type:disc}ol{list-style-type:decimal}ol ol,ol ul,ul ol,ul ul{margin-block-start:0.5rem;margin-block-end:0.5rem;list-style-type:circle}li{margin-block:0.5rem}.moss-skip-link,.sr-only{display:inline-block;width:1px;height:1px;padding:0;margin:-1px 0 0 -1px;overflow:hidden;clip:rect(0,0,0,0);clip-path:circle(0);white-space:nowrap;border:0}.moss-skip-link:active,.moss-skip-link:focus{overflow:visible;z-index:1000}.moss-anchored-heading{position:relative}.moss-anchor::before{content:'#';display:inline-block;margin-left:-1.25ch;margin-right:.25ch;fill:currentColor;opacity:0;transition:opacity 250ms ease-in-out}.moss-anchor-container{position:absolute;top:0;left:0}.moss-anchor-container:focus .moss-anchor::before,.moss-anchor-container:focus-within .moss-anchor::before,.moss-anchor-container:hover .moss-anchor::before,.moss-anchored-heading:focus .moss-anchor::before,.moss-anchored-heading:focus-within .moss-anchor::before,.moss-anchored-heading:hover .moss-anchor::before{opacity:1}</style><link rel="modulepreload" crossorigin href="/_assets/2017-03-10-provide-inject-NYggieCs.js"><link rel="alternate" type="text/markdown" href="https://znck.dev/articles/2017-03-10-provide-inject.md"><link rel="canonical" href="https://znck.dev/articles/2017-03-10-provide-inject"><link rel="alternate" type="application/atom+xml" href="https://znck.dev/atom.xml"><link rel="alternate" type="application/rss+xml" href="https://znck.dev/rss.xml"><script type="module" crossorigin src="/_assets/index-CslQqMog.js"></script></head><body><div id="app"><!--[--><a class="moss-skip-link" href="#moss-content-region">Skip to content</a><header class="moss-site-header"><nav aria-label="Primary navigation"><a href="/">Home</a></nav></header><main id="moss-content-region" class="moss-content moss-layout-default"><article><!--[--><!--[--><h1 id="provideinject-in-vue-22" class="moss-anchored-heading">Provide/Inject in Vue 2.2<a tabindex="-1" class="moss-anchor-container" href="#provideinject-in-vue-22"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Provide/Inject in Vue 2.2</span></a></h1><p>The <strong>Initial D</strong> release of Vue have some amazing new features, including improved server side rendering, v-model customization, better error handling, provide &amp; inject pair and many other small improvements.</p><p>The provide and inject pair offers data flow deep in descendant chain. Ancestor components can serve as dependency injector for all its descendants, regardless how deep the component hierarchy is. The feature is advertised for advance plugin/component usages.</p><h2 id="workflow" class="moss-anchored-heading">Workflow<a tabindex="-1" class="moss-anchor-container" href="#workflow"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Workflow</span></a></h2><p>It works in two parts â€” One component would provide data and other would use it (inject).</p><blockquote><p>The provide option should be an object or a function that returns an object. This object contains the properties that are available for injection into its descendants. You can use ES2015 Symbols as keys in this object, but only in environments that natively support Symbol and Reflect.ownKeys.</p></blockquote><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Provider</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  provide</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    foo</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;bar&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><blockquote><p>The inject options should be either an Array of strings or an object where the keys stand for the local binding name, and the value being the key (<code>string</code> or <code>Symbol</code>) to search for in available injections.</p></blockquote><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Child</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  inject</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> [</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;">&#39;foo&#39;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">]</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><iframe width="100%" height="480" src="https://jsfiddle.net/znck/4v95vfh3/embedded/js,html,css,result/dark/" allowfullscreen allowpaymentrequest frameborder="0"></iframe><p>The provide/inject binding are <strong>NOT</strong> reactive. But if observed objects are provided, they do remain reactive.</p><pre class="shiki shiki-themes min-light min-dark" style="background-color:light-dark(#ffffff, #1f1f1f);--shiki-light-bg:#ffffff;--shiki-dark-bg:#1f1f1f;color:light-dark(#24292eff, #b392f0);--shiki-light:#24292eff;--shiki-dark:#b392f0;" tabindex="0" data-language="js"><code class="language-js"><span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> Provider</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  provide</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">() {</span></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">    const</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> foo</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;"> =</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;">    Object</span><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.defineProperty</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">(foo</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;bar&#39;</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> {</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">      enumerable</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> true</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      get</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span><span style="color:light-dark(#1976D2, #79B8FF);--shiki-light:#1976D2;--shiki-dark:#79B8FF;"> this</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">.bar</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">    return</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> { foo }</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">  }</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:light-dark(#6F42C1, #B392F0);--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  data</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> () </span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">=&gt;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> ({ bar</span><span style="color:light-dark(#D32F2F, #F97583);--shiki-light:#D32F2F;--shiki-dark:#F97583;">:</span><span style="color:light-dark(#22863A, #FFAB70);--shiki-light:#22863A;--shiki-dark:#FFAB70;"> &#39;baz&#39;</span><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;"> })</span><span style="color:light-dark(#212121, #BBBBBB);--shiki-light:#212121;--shiki-dark:#BBBBBB;">,</span></span>
<span class="line"><span style="color:light-dark(#24292EFF, #B392F0);--shiki-light:#24292EFF;--shiki-dark:#B392F0;">}</span></span></code></pre><figure data-type="code"><div data-iframe=""><iframe width="100%" height="480" src="https://jsfiddle.net/znck/fdzwtz43/embedded/js,html,css,result/dark/" allowfullscreen frameborder="0"></iframe></div><figcaption>Reactive provide/inject example</figcaption></figure><p>Injections are available in props and data. So, you could set prop defaults to injected data or you can use injections as initial data.</p><h2 id="performance" class="moss-anchored-heading">Performance<a tabindex="-1" class="moss-anchor-container" href="#performance"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Performance</span></a></h2><p>Both provide and inject are one time actions performed at component initialisation. So, there wonâ€™t be any apparent performance degradation.</p><p>provide action is constant time.</p><p>For each injected property, inject would traverse the parent chain until first provider is reached.</p><h2 id="conclusion" class="moss-anchored-heading">Conclusion<a tabindex="-1" class="moss-anchor-container" href="#conclusion"><span class="moss-anchor"></span><span class="sr-only">Jump to section titled Conclusion</span></a></h2><p>With provide/inject, you can provide data to distant descendent and that allows to create amazing functionalities. A whole new type of Vue plugins are about to appear.</p><p>For example: A parent component can inject validation messages in input components.</p><iframe width="100%" height="480" src="https://jsfiddle.net/znck/go4yepc1/embedded/js,html,css,result/dark/" allowfullscreen frameborder="0"></iframe><!--]--><!--]--></article></main><!--]--></div></body></html>